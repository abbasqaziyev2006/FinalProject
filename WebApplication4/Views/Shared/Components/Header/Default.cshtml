@using EcommerceCoza.BLL.ViewModels
@using Microsoft.AspNetCore.Mvc.Localization
@inject WebApplication4.Services.ICurrencyService CurrencyService
@inject IViewLocalizer Localizer
@model HeaderViewModel
<header id="header" class="header header-fullwidth header-transparent-bg">
    <div class="container">
        <div class="header-desk header-desk_type_1">
            <div class="logo">
                <a href="~/index.html">
                    <img src="~/assets/images/logo.png" alt="Uomo" class="logo__image d-block" />
                </a>
            </div>

            <nav class="navigation">
                <ul class="navigation__list list-unstyled d-flex">
                    <li class="navigation__item">
                        <a asp-controller="Home" asp-action="Index" class="navigation__link">Home</a>
                    </li>
                    <li class="navigation__item">
                        <a asp-controller="Shop" asp-action="Index" class="navigation__link">Shop</a>
                    </li>
                    <li class="navigation__item">
                        <a asp-controller="Basket" asp-action="Index" class="navigation__link">Cart</a>
                    </li>
                    <li class="navigation__item">
                        <a asp-controller="Home" asp-action="About" class="navigation__link">About</a>
                    </li>
                    <li class="navigation__item">
                        <a asp-controller="Home" asp-action="Contact" class="navigation__link">Contact</a>
                    </li>
                </ul>
            </nav>

            <div class="header-tools d-flex align-items-center">
                <form asp-controller="Localization" asp-action="SetLanguage" method="post" class="me-2">
                    <input type="hidden" name="returnUrl" value="@Context.Request.Path@Context.Request.QueryString" />
                    <select name="culture" class="form-select form-select-sm" onchange="this.form.submit()">
                        <option value="en" selected="@((System.Threading.Thread.CurrentThread.CurrentUICulture.TwoLetterISOLanguageName == "en") ? "selected" : null)">EN</option>
                        <option value="ru" selected="@((System.Threading.Thread.CurrentThread.CurrentUICulture.TwoLetterISOLanguageName == "ru") ? "selected" : null)">RU</option>
                        <option value="az" selected="@((System.Threading.Thread.CurrentThread.CurrentUICulture.TwoLetterISOLanguageName == "az") ? "selected" : null)">AZ</option>
                    </select>
                </form>


                <form asp-controller="Currency" asp-action="SetCurrency" method="post" class="me-2">
                    <input type="hidden" name="returnUrl" value="@Context.Request.Path@Context.Request.QueryString" />
                    <select name="currency" class="form-select form-select-sm" onchange="this.form.submit()">
                        @{
                            var currentCurrency = CurrencyService.GetCurrentCurrency();
                        }
                        <option value="USD" selected="@(currentCurrency == WebApplication4.Models.Currency.USD ? "selected" : null)">USD ($)</option>
                        <option value="AZN" selected="@(currentCurrency == WebApplication4.Models.Currency.AZN ? "selected" : null)">AZN (₼)</option>
                        <option value="RUB" selected="@(currentCurrency == WebApplication4.Models.Currency.RUB ? "selected" : null)">RUB (₽)</option>
                    </select>
                </form>

                <!-- Theme toggle button -->
                <button id="theme-toggle-btn"
                        class="theme-toggle-btn me-2"
                        type="button"
                        aria-label="Toggle dark mode"
                        aria-pressed="false"
                        title="Toggle theme">
                    <span class="theme-toggle__icon icon-sun" aria-hidden="true">
                        <!-- Sun -->
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <circle cx="10" cy="10" r="5" stroke="currentColor" stroke-width="1.5" />
                            <path d="M10 1v3M10 16v3M1 10h3M16 10h3M4.1 4.1l2.1 2.1M13.8 13.8l2.1 2.1M4.1 15.9l2.1-2.1M13.8 6.2l2.1-2.1"
                                  stroke="currentColor" stroke-width="1.2" stroke-linecap="round" />
                        </svg>
                    </span>
                    <span class="theme-toggle__icon icon-moon" aria-hidden="true">
                        <!-- Moon -->
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M12.9 1.75A8 8 0 0 0 10 17a8 8 0 0 1-6.5-12.6 7.5 7.5 0 1 1 9.4-2.65Z"
                                  stroke="currentColor" stroke-width="1.5" fill="none" />
                        </svg>
                    </span>
                </button>

                <div class="header-tools__item hover-container">
                    <div class="js-hover__open position-relative">
                        <a class="js-search-popup search-field__actor" href="~/#">
                            <svg class="d-block" width="20" height="20" viewBox="0 0 20 20" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <use href="#icon_search" />
                            </svg>
                            <i class="btn-icon btn-close-lg"></i>
                        </a>
                    </div>

                    <div class="search-popup js-hidden-content">
                        <form action="#" method="GET" class="search-field container">
                            <p class="text-uppercase text-secondary fw-medium mb-4">What are you looking for?</p>
                            <div class="position-relative">
                                <input class="search-field__input search-popup__input w-100 fw-medium" type="text"
                                       name="search-keyword" placeholder="Search products" />
                                <button class="btn-icon search-popup__submit" type="submit">
                                    <svg class="d-block" width="20" height="20" viewBox="0 0 20 20" fill="none"
                                         xmlns="http://www.w3.org/2000/svg">
                                        <use href="#icon_search" />
                                    </svg>
                                </button>
                                <button class="btn-icon btn-close-lg search-popup__reset" type="reset"></button>
                            </div>

                            <div class="search-popup__results">
                                <div class="sub-menu search-suggestion">
                                    <h6 class="sub-menu__title fs-base">Quicklinks</h6>
                                    <ul class="sub-menu__list list-unstyled">
                                        <li class="sub-menu__item">
                                            <a href="~/shop2.html" class="menu-link menu-link_us-s">New Arrivals</a>
                                        </li>
                                        <li class="sub-menu__item"><a href="~/#" class="menu-link menu-link_us-s">Dresses</a></li>
                                        <li class="sub-menu__item">
                                            <a href="~/shop3.html" class="menu-link menu-link_us-s">Accessories</a>
                                        </li>
                                        <li class="sub-menu__item"><a href="~/#" class="menu-link menu-link_us-s">Footwear</a></li>
                                        <li class="sub-menu__item"><a href="~/#" class="menu-link menu-link_us-s">Sweatshirt</a></li>
                                    </ul>
                                </div>

                                <div class="search-result row row-cols-5"></div>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="header-tools__item hover-container">
                    @if (User.Identity?.IsAuthenticated ?? false)
                    {
                        <a asp-controller="Account" asp-action="Index" class="header-tools__item" title="My Account">
                            <svg class="d-block" width="20" height="20" viewBox="0 0 20 20" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <use href="#icon_user" />
                            </svg>
                        </a>
                    }
                    else
                    {
                        <a asp-controller="Account" asp-action="Login" class="header-tools__item" title="Login">
                            <svg class="d-block" width="20" height="20" viewBox="0 0 20 20" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <use href="#icon_user" />
                            </svg>
                        </a>
                    }
                </div>

                <a asp-controller="Wishlist" asp-action="Index" class="header-tools__item">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <use href="#icon_heart" />
                    </svg>
                </a>

                <a asp-controller="Basket" asp-action="Index" class="header-tools__item header-tools__cart">
                    <svg class="d-block" width="20" height="20" viewBox="0 0 20 20" fill="none"
                         xmlns="http://www.w3.org/2000/svg">
                        <use href="#icon_cart" />
                    </svg>
                    <span class="cart-amount d-block position-absolute js-cart-items-count">3</span>
                </a>
            </div>
        </div>
    </div>
</header>